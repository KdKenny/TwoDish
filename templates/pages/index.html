{% extends "base.html" %}
{% load static %}

{% block title %}兩餸飯搜查組{% endblock %}

{% block content %}
<div class="section section-about" style="padding: 80px 0;">
  <div class="container">
      <!-- Google Map & Search Section Start -->
        <div class="map-search-section" style="margin-top:10px;">
          <div id="map" style="width:100%;height:600px;border-radius:10px;"></div>
          <form id="restaurantSearchForm" class="mt-3">
            <div class="row">
              <div class="col-md-4 mb-2">
                <input type="text" name="restaurant_name" class="form-control" placeholder="餐廳名稱 (可選)">
              </div>
              <div class="col-md-4 mb-2">
                <select name="restaurant_area" class="form-control">
                  <option value="">選擇地區 (可選)</option>
                  <option value="Hong Kong">香港</option>
                  <option value="Kowloon">九龍</option>
                  <option value="New Territories">新界</option>
                  <option value="Islands">離島</option>
                </select>
              </div>
              <div class="col-md-4 mb-2">
                <select name="restaurant_district" class="form-control">
                  <option value="">選擇分區 (可選)</option>
                  <option value="Islands">Islands</option>
                  <option value="Kwai Tsing">Kwai Tsing</option>
                  <option value="North">North</option>
                  <option value="Sai Kung">Sai Kung</option>
                  <option value="Sha Tin">Sha Tin</option>
                  <option value="Tai Po">Tai Po</option>
                  <option value="Tuen Mun">Tuen Mun</option>
                  <option value="Tsuen Wan">Tsuen Wan</option>
                  <option value="Yuen Long">Yuen Long</option>
                  <option value="Kowloon City">Kowloon City</option>
                  <option value="Kwun Tong">Kwun Tong</option>
                  <option value="Sham Shui Po">Sham Shui Po</option>
                  <option value="Wong Tai Sin">Wong Tai Sin</option>
                  <option value="Yau Tsim Mong">Yau Tsim Mong</option>
                  <option value="Central & Western">Central & Western</option>
                  <option value="Eastern">Eastern</option>
                  <option value="Southern">Southern</option>
                  <option value="Wan Chai">Wan Chai</option>
                </select>
              </div>
              <div class="col-md-6 mb-2">
                <input type="text" name="restaurant_street" class="form-control" placeholder="街道 (可選)">
              </div>
              <div class="col-md-6 mb-2">
                <input type="text" name="restaurant_address" class="form-control" placeholder="地址 (可選)">
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 text-right">
                <button type="submit" class="btn btn-primary">搜尋</button>
              </div>
            </div>
          </form>
          </div>
        </div>
        <script>
          // 地區對應中心點
          const regionCenters = {
            hongkong: {lat: 22.2783, lng: 114.1747},
            kowloon: {lat: 22.3167, lng: 114.1833},
            nt: {lat: 22.3964, lng: 114.1095}
          };
          let map;
          function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 22.3193, lng: 114.1694},
              zoom: 11
            });
          }
          window.initMap = initMap;
          document.addEventListener('DOMContentLoaded', function() {
            if (typeof google !== 'undefined' && google.maps) {
              initMap();
            }
            document.getElementById('regionSelect').addEventListener('change', function(e) {
              const val = e.target.value;
              if(regionCenters[val]) {
                map.setCenter(regionCenters[val]);
              }
            });
            document.getElementById('mapSearch').addEventListener('keydown', function(e) {
              if(e.key === 'Enter') {
                const query = e.target.value;
                const service = new google.maps.places.PlacesService(map);
                const request = {query: query, fields: ['name', 'geometry']};
                service.findPlaceFromQuery(request, function(results, status) {
                  if (status === google.maps.places.PlacesServiceStatus.OK && results[0]) {
                    map.setCenter(results[0].geometry.location);
                  }
                });
              }
            });
          });
        </script>
        <!-- Google Map & Search Section End -->

    <div class="row">
      <div class="col-md-12 text-center">
        <h2 class="title" style="margin-bottom: 50px;">精選美食 - 冠名贊助</h2>
      </div>
    </div>
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="2000">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="d-flex justify-content-center">
            <img src="https://picsum.photos/200/100?random=1" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=2" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=3" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=4" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=5" class="d-block" alt="...">
          </div>
        </div>
        <div class="carousel-item">
          <div class="d-flex justify-content-center">
            <img src="https://picsum.photos/200/100?random=6" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=7" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=8" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=9" class="d-block" alt="..." style="margin-right: 10px;">
            <img src="https://picsum.photos/200/100?random=10" class="d-block" alt="...">
          </div>
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    
    <div class="row mt-5">
      <div class="col-md-12 text-center">
        <p class="text-muted">感謝您選擇兩餸飯搜查組，讓我們一起探索美食世界！</p>
      </div>
    </div>
    
  </div>
</div>
{% endblock content %}